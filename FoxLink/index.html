<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Foxlink Redirect</title>
<script>
// Function to get URL query parameters
function getQueryParam(param) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(param);
}

async function redirectFoxlink() {
    const id = getQueryParam('q');
    if (!id) {
        document.getElementById('status').textContent = 'No ID provided in URL.';
        return;
    }

    const dataURL = 'https://foxurl.github.io/web/foxLINK/linking/data.json';

    try {
        const response = await fetch(dataURL);
        if (!response.ok) throw new Error('Failed to fetch data.json');
        const jsonData = await response.json();
        
        const entry = jsonData.find(item => item.ID === id);
        if (entry && entry.link) {
            document.getElementById('status').textContent = 'Redirecting to ' + entry.name + '...';
            window.location.href = entry.link;
        } else {
            document.getElementById('status').textContent = 'No matching ID found.';
        }
    } catch (err) {
        document.getElementById('status').textContent = 'Error: ' + err;
    }
}

window.onload = redirectFoxlink;
</script>
</head>
<body style="font-family:sans-serif;display:flex;align-items:center;justify-content:center;height:100vh;background:#f0f0f0;">
<div style="text-align:center;">
    <h1>Foxlink Redirect</h1>
    <p id="status">Loading...</p>
</div>
</body>
</html>
