<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>foxurl browse</title>
</head>
<body>
<pre id="out"></pre>
<script>
async function main(){
  const out=document.getElementById('out');
  let hash=location.hash.slice(1);
  if(!hash){out.textContent='404';return;}
  try{hash=decodeURIComponent(hash);}catch(e){}
  out.textContent='Searching...';
  const api='https://api.duckduckgo.com/?q='+encodeURIComponent(hash)+'&format=json&no_html=1&skip_disambig=1';
  try{
    const r=await fetch(api);
    if(!r.ok)throw new Error(r.status);
    const d=await r.json();
    let text=d.AbstractText||'';
    if(!text&&Array.isArray(d.RelatedTopics)&&d.RelatedTopics.length){
      text=d.RelatedTopics.map(t=>t.Text||'').filter(Boolean).join('\n');
    }
    if(!text)text='no result';
    out.textContent=text.trim();
  }catch(e){
    out.textContent='error';
  }
}
main();
window.addEventListener('hashchange',main);
</script>
</body>
</html>
