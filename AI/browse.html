<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>foxurl browse</title>
  -- Load global script (adds footer, favicon, and style.css automatically) -->
    <script src="https://FoxURL.github.io/main.js" defer></script>
</head>
<body>
<pre id="out"></pre>
<script>
async function main(){
  const out=document.getElementById('out');
  const params=new URLSearchParams(location.search);
  const q=params.get('q');
  if(!q){out.textContent='404';return;}
  out.textContent='Searching...';
  const api='https://api.duckduckgo.com/?q='+encodeURIComponent(q)+'&format=json&no_html=1&skip_disambig=1';
  try{
    const r=await fetch(api);
    if(!r.ok)throw new Error(r.status);
    const d=await r.json();
    let text=d.AbstractText||'';
    if(!text&&Array.isArray(d.RelatedTopics)&&d.RelatedTopics.length){
      text=d.RelatedTopics.map(t=>t.Text||'').filter(Boolean).join('\n');
    }
    if(!text)text='no result';
    out.textContent=text.trim();
  }catch(e){
    out.textContent='error';
  }
}
main();
window.addEventListener('popstate',main);
</script>
</body>
</html>
